{% extends 'base.html' %}
{% block title %}Admin Panel - Restaurant Table Reservation{% endblock %}
{% block head %}{% endblock %}
{% block content %}
<div class="admin-container">
    <div class="search-and-results">

        <section class="search-form">
            <h2>Search Reservations</h2>
            <form method="GET" action="{{ url_for('admin') }}">
                <input type="text" name="name" placeholder="Name" value="{{ request.args.get('name', '') }}">
                <input type="email" name="email" placeholder="Email" value="{{ request.args.get('email', '') }}">
                <input type="date" name="date" placeholder="Date" value="{{ request.args.get('date', '') }}">
                <input type="time" name="time" placeholder="Time" value="{{ request.args.get('time', '') }}">
                <input type="number" name="guests" placeholder="Guests" value="{{ request.args.get('guests', '') }}">
                <button type="submit">Search</button>
            </form>
        </section>

        <section class="search-results">
            <h2>Search Results</h2>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Timestamp</th>
                        <th>Email</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Guests</th>
                        <th>Comments</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for reservation in search_results %}
                    <tr>
                        <td>{{ reservation.name }}</td>
                        <td>{{ reservation.timestamp }}</td>
                        <td>{{ reservation.email }}</td>
                        <td>{{ reservation.date }}</td>
                        <td>{{ reservation.time }}</td>
                        <td>{{ reservation.guests }}</td>
                        <td>{{ reservation.comments }}</td>
                        <td>
                            <a href="{{ url_for('delete', reservation_id=reservation.id) }}" class="btn-delete">Delete</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>
    </div>

    <section class="reservations">
        <h2>All Reservations</h2>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Timestamp</th>
                    <th>Email</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Guests</th>
                    <th>Comments</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for reservation in all_reservations %}
                <tr>
                    <td>{{ reservation.name }}</td>
                    <td>{{ reservation.timestamp }}</td>
                    <td>{{ reservation.email }}</td>
                    <td>{{ reservation.date }}</td>
                    <td>{{ reservation.time }}</td>
                    <td>{{ reservation.guests }}</td>
                    <td>{{ reservation.comments }}</td>
                    <td>
                        <a href="{{ url_for('delete', reservation_id=reservation.id) }}" class="btn-delete">Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
</div>
{% endblock %}